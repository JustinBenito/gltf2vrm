<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moonshot Factory: GLTF to VRM Converter</title>

    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="container">
        <header>
            <h1>GLTF to VRM Converter</h1>
            <p>Upload a GLTF 2.0 model and follow the steps to convert it into a VRM 0 / VRM 1 file.</p>
        </header>
        <main>
            <div id="wizard-container">
                <!-- Step 1: File Upload -->
                <div id="step-1" class="wizard-step active">
                    <h2>Step 1: Upload Model</h2>
                    <div id="file-upload-section">
                        <input type="file" id="file-upload" accept=".glb">
                        <label for="file-upload" id="file-upload-label">Select .glb File</label>
                        <p id="file-name">No file selected.</p>
                    </div>
                    <div class="button-group">
                        <span></span>
                        <button id="next-to-step-2" class="btn-primary" disabled>Next</button>
                    </div>
                </div>

                <!-- Step 2: Metadata -->
                <div id="step-2" class="wizard-step">
                    <h2>Step 2: Metadata</h2>
                    <div class="form-group">
                        <label for="meta-name" class="required-field">Model Name</label>
                        <input type="text" id="meta-name" placeholder="e.g., My Awesome Avatar">
                    </div>
                    <div class="form-group">
                        <label for="meta-author" class="required-field">Author</label>
                        <input type="text" id="meta-author" placeholder="e.g., Your Name">
                    </div>
                    <div class="form-group">
                        <label for="meta-license">License</label>
                        <small>Select the license that best fits your model.</small>
                        <select id="meta-license">
                            <option value="https://vrm.dev/licenses/1.0/">VRM Community License 1.0</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Permissions</label>
                        <small>Define who is allowed to use this avatar.</small>
                        <select id="meta-avatarPermission">
                            <option value="onlyAuthor">Only the Author</option>
                            <option value="onlySeparatelyLicensedPerson">Explicitly Licensed Person</option>
                            <option value="everyone">Everyone</option>
                        </select>
                    </div>
                    <div class="button-group">
                        <button id="prev-to-step-1" class="btn-secondary">Previous</button>
                        <button id="next-to-step-3" class="btn-primary">Next</button>
                    </div>
                </div>

                <!-- Step 3: Humanoid Bone Mapping -->
                <div id="step-3" class="wizard-step">
                    <h2>Step 3: Humanoid Bone Mapping</h2>
                    <p>Map your model's bones to the VRM standard. The dropdown only contains bones used by the model's skin. The **Hips** bone is the most important, as it defines the root of the skeleton.</p>
                    <div id="bone-mapping-grid" class="bone-mapping-grid">
                        <!-- Bone mapping fields will be generated here by JS -->
                    </div>
                    <div class="button-group">
                        <button id="prev-to-step-2" class="btn-secondary">Previous</button>
                        <button id="next-to-step-4" class="btn-primary">Next</button>
                    </div>
                </div>
                
                <!-- Step 4: Expression Mapping -->
                <div id="step-4" class="wizard-step">
                    <h2>Step 4: Expression Mapping (Blend Shapes)</h2>
                    <p>Map your model's blend shapes (morph targets) to standard VRM expressions.</p>
                    <div id="expression-mapping-grid" class="expression-mapping-grid">
                        <!-- Expression mapping fields will be generated here by JS -->
                    </div>
                     <div class="button-group">
                        <button id="prev-to-step-3" class="btn-secondary">Previous</button>
                        <button id="convert-and-download" class="btn-success" type="button">Convert & Download (VRM 1.0)</button>
                        <button id="convert-and-download-vrm0" class="btn-primary" type="button">Convert & Download (VRM 0.x)</button>
                    </div>
                </div>
            </div>
            
            <div id="status-log-container">
                <h3>Log</h3>
                <div id="status-log">Welcome! Select a file to begin.</div>
            </div>
        </main>
    </div>

    <script src="script.js">
    </script>

</body>
</html>